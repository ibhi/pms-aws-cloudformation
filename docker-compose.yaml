version: '2'
services:
  nginx-proxy:
    image: 'jwilder/nginx-proxy:latest'
    container_name: nginx-proxy
    volumes:
      - '/var/run/docker.sock:/tmp/docker.sock:ro'
    ports:
      - '80:80'
    restart: always

  plex:
    image: linuxserver/plex
    container_name: plex
    volumes:
      - '/cache/config/plex:/config'
      - '${DATA_DIRECTORY_PATH}/TV:/data/tvshows'
      - '${DATA_DIRECTORY_PATH}/Movies:/data/movies'
      - '${DATA_DIRECTORY_PATH}/Music:/data/music'
    ports:
      - '32469:32469'
      - '32400:32400'
      - '1900:1900/udp'
      - '5353:5353/udp'
      - '32400:32400/udp'
      - '32469:32469/udp'
    env_file: uidgid.env
    environment:
      - VIRTUAL_HOST=plex.${HOST_NAME}
      - VIRTUAL_PORT=32400
      - VERSION = public
    restart: always
    network_mode: host

  nzbget:
    image: linuxserver/nzbget
    container_name: nzbget
    volumes:
      - '/cache/config/nzbget:/config'
      - '/cache/data/Downloads:/downloads'
    ports:
      - '6789:6789'
    env_file: uidgid.env
    environment:
      - VIRTUAL_HOST=nzbget.${HOST_NAME}
      - VIRTUAL_PORT=6789
    restart: always
    
  sonarr:
    image: linuxserver/sonarr
    container_name: sonarr
    volumes:
      - '/cache/config/sonarr:/config'
      - '/etc/localtime:/etc/localtime:ro'
      - '${DATA_DIRECTORY_PATH}/TV:/tv'
      - '/cache/data/Downloads:/downloads'
      - '/cache/uploads:/uploads'
    ports:
      - '8989:8989'
    env_file: uidgid.env
    environment:
      - VIRTUAL_HOST=sonarr.${HOST_NAME}
      - VIRTUAL_PORT=8989
    restart: always
  
  radarr:
    image: linuxserver/radarr
    container_name: radarr
    volumes:
      - '/cache/config/radarr:/config'
      - '${DATA_DIRECTORY_PATH}/Movies:/movies'
      - '/cache/data/Downloads:/downloads'
      - '/cache/uploads:/uploads'
      - '/etc/localtime:/etc/localtime:ro'
    ports:
      - '7878:7878'
    env_file: uidgid.env
    environment:
      - VIRTUAL_HOST=radarr.${HOST_NAME}
      - VIRTUAL_PORT=7878
    restart: always

  plexpy:
    image: linuxserver/plexpy
    container_name: plexpy
    volumes:
      - '/cache/config/plexpy:/config'
      - '/etc/localtime:/etc/localtime:ro'
      - '${DATA_DIRECTORY_PATH}/config/plex/Library/Application Support/Plex Media Server/Logs:/logs:ro'
    ports:
      - '8181:8181'
    env_file: uidgid.env
    environment:
      - VIRTUAL_HOST=plexpy.${HOST_NAME}
      - VIRTUAL_PORT=8181
    restart: always

  # ombi:
  #   image: linuxserver/ombi
  #   container_name: ombi
  #   volumes:
  #     - '${DATA_DIRECTORY_PATH}/config/ombi:/config'
  #     - '/etc/localtime:/etc/localtime:ro'
  #   ports:
  #     - '3579:3579'
  #   env_file: uidgid.env
  #   environment:
  #     - VIRTUAL_HOST=ombi.${HOST_NAME}
  #     - VIRTUAL_PORT=3579
  #   restart: always

  portainer:
    image: portainer/portainer
    container_name: portainer
    volumes:
      - '/var/run/docker.sock:/var/run/docker.sock'
      - '/cache/portainer_data:/data'
    ports:
      - '9000:9000'
    env_file: uidgid.env
    environment:
      - VIRTUAL_HOST=portainer.${HOST_NAME}
      - VIRTUAL_PORT=9000
    restart: always
